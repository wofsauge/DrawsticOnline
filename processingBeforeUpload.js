data=[{Name:"chubberworm",frequentColors:[{R:223,G:228,B:208,A:255,count:392},{R:200,G:210,B:175,A:255,count:350},{R:135,G:148,B:97,A:255,count:273}]},{Name:"stonehead",frequentColors:[{R:92,G:86,B:86,A:255,count:1331},{R:36,G:35,B:35,A:255,count:1198},{R:74,G:68,B:68,A:255,count:927},{R:101,G:95,B:95,A:255,count:818},{R:83,G:77,B:77,A:255,count:771},{R:48,G:46,B:46,A:255,count:361},{R:61,G:57,B:57,A:255,count:227},{R:210,G:10,B:10,A:255,count:16},{R:167,G:20,B:20,A:255,count:9}]},{Name:"bodies01",
frequentColors:[{R:3,G:3,B:3,A:255,count:3542},{R:207,G:156,B:155,A:255,count:2299},{R:125,G:125,B:125,A:255,count:1827},{R:227,G:198,B:197,A:255,count:1412},{R:172,G:172,B:172,A:255,count:1040},{R:185,G:115,B:113,A:255,count:647},{R:215,G:215,B:215,A:255,count:600},{R:85,G:85,B:85,A:255,count:519}]},{Name:"bodies02",frequentColors:[{R:207,G:156,B:155,A:255,count:697},{R:227,G:198,B:197,A:255,count:543},{R:131,G:0,B:0,A:255,count:267},{R:185,G:115,B:113,A:255,count:240},{R:121,G:32,B:32,A:255,count:223},
{R:3,G:3,B:3,A:255,count:163},{R:179,G:0,B:0,A:255,count:90}]},{Name:"monster_000_bodies02_scarred",frequentColors:[{R:148,G:128,B:127,A:255,count:697},{R:190,G:173,B:172,A:255,count:543},{R:131,G:0,B:0,A:255,count:267},{R:114,G:96,B:95,A:255,count:240},{R:121,G:32,B:32,A:255,count:223},{R:3,G:3,B:3,A:255,count:163},{R:179,G:0,B:0,A:255,count:90}]},{Name:"pooter",frequentColors:[{R:128,G:128,B:128,A:255,count:416},{R:191,G:191,B:191,A:255,count:230}]},{Name:"superpooter",frequentColors:[{R:160,G:85,
B:85,A:255,count:359},{R:230,G:120,B:120,A:255,count:243},{R:107,G:56,B:56,A:255,count:209},{R:168,G:168,B:168,A:255,count:126}]},{Name:"eternalfly",frequentColors:[{R:134,G:103,B:103,A:255,count:1244},{R:46,G:46,B:46,A:255,count:1003},{R:155,G:0,B:0,A:255,count:393},{R:76,G:76,B:76,A:255,count:282},{R:194,G:194,B:194,A:255,count:64},{R:203,G:0,B:0,A:255,count:32},{R:107,G:0,B:0,A:255,count:20}]},{Name:"fly",frequentColors:[{R:134,G:103,B:103,A:255,count:1244},{R:155,G:0,B:0,A:255,count:393},{R:1,
G:0,B:8,A:255,count:145},{R:119,G:119,B:119,A:255,count:76},{R:203,G:0,B:0,A:255,count:32},{R:204,G:0,B:96,A:255,count:32},{R:255,G:242,B:0,A:255,count:32},{R:107,G:0,B:0,A:255,count:20},{R:108,G:0,B:84,A:255,count:20},{R:130,G:123,B:0,A:255,count:20},{R:128,G:128,B:128,A:255,count:18},{R:243,G:108,B:79,A:255,count:12},{R:241,G:110,B:170,A:255,count:12}]},{Name:"moterfly",frequentColors:[{R:128,G:128,B:128,A:255,count:68}]},{Name:"gaper",frequentColors:[{R:227,G:198,B:197,A:255,count:880},{R:207,
G:156,B:155,A:255,count:211},{R:179,G:0,B:0,A:255,count:79},{R:131,G:0,B:0,A:255,count:63},{R:185,G:115,B:113,A:255,count:39},{R:107,G:0,B:0,A:255,count:32}]},{Name:"frowninggaper",frequentColors:[{R:227,G:198,B:197,A:255,count:833},{R:207,G:156,B:155,A:255,count:235},{R:179,G:0,B:0,A:255,count:80},{R:107,G:0,B:0,A:255,count:64},{R:131,G:0,B:0,A:255,count:63},{R:185,G:115,B:113,A:255,count:39}]},{Name:"gurgle",frequentColors:[{R:66,G:142,B:66,A:255,count:387},{R:50,G:106,B:50,A:255,count:181},{R:28,
G:55,B:28,A:255,count:115}]},{Name:"horf",frequentColors:[{R:227,G:198,B:197,A:255,count:565},{R:207,G:156,B:155,A:255,count:177},{R:179,G:0,B:0,A:255,count:96},{R:82,G:0,B:0,A:255,count:72},{R:131,G:0,B:0,A:255,count:70},{R:185,G:115,B:113,A:255,count:34}]},{Name:"hopperleaper",frequentColors:[{R:207,G:156,B:155,A:255,count:987},{R:227,G:198,B:197,A:255,count:943},{R:185,G:115,B:113,A:255,count:259},{R:179,G:0,B:0,A:255,count:240},{R:107,G:0,B:0,A:255,count:143},{R:6,G:1,B:1,A:255,count:96}]},{Name:"flaminghopper",
frequentColors:[{R:37,G:37,B:37,A:255,count:963},{R:51,G:51,B:51,A:255,count:931},{R:25,G:25,B:25,A:255,count:244}]},{Name:"mulligan",frequentColors:[{R:227,G:198,B:197,A:255,count:2777},{R:207,G:156,B:155,A:255,count:1491},{R:176,G:125,B:125,A:255,count:736},{R:156,G:200,B:204,A:255,count:288},{R:155,G:94,B:94,A:255,count:276},{R:104,G:152,B:156,A:255,count:194},{R:223,G:204,B:221,A:255,count:36}]},{Name:"muligoon",frequentColors:[{R:198,G:175,B:175,A:255,count:2975},{R:166,G:130,B:130,A:255,count:1747},
{R:136,G:97,B:97,A:255,count:965},{R:112,G:77,B:77,A:255,count:399},{R:223,G:204,B:221,A:255,count:14}]},{Name:"muliboom",frequentColors:[{R:227,G:198,B:197,A:255,count:1936},{R:207,G:156,B:155,A:255,count:966},{R:176,G:125,B:125,A:255,count:431},{R:155,G:94,B:94,A:255,count:197},{R:156,G:200,B:204,A:255,count:111},{R:83,G:83,B:83,A:255,count:105},{R:179,G:0,B:0,A:255,count:103},{R:187,G:187,B:187,A:255,count:98},{R:67,G:67,B:67,A:255,count:78},{R:104,G:152,B:156,A:255,count:58},{R:151,G:151,B:151,
A:255,count:57},{R:131,G:0,B:0,A:255,count:52},{R:223,G:204,B:221,A:255,count:18}]},{Name:"clotty",frequentColors:[{R:121,G:32,B:32,A:255,count:3036},{R:196,G:51,B:51,A:255,count:500},{R:87,G:23,B:23,A:255,count:475},{R:167,G:167,B:167,A:255,count:133}]},{Name:"clot",frequentColors:[{R:51,G:51,B:51,A:255,count:2017},{R:67,G:67,B:67,A:255,count:1663},{R:147,G:99,B:7,A:255,count:292},{R:207,G:179,B:7,A:255,count:150}]},{Name:"lblob",frequentColors:[{R:227,G:198,B:197,A:255,count:1843},{R:207,G:156,
B:155,A:255,count:1462},{R:185,G:115,B:113,A:255,count:361},{R:156,G:200,B:205,A:255,count:212},{R:103,G:151,B:155,A:255,count:50}]},{Name:"sucker",frequentColors:[{R:107,G:0,B:0,A:255,count:54},{R:119,G:119,B:119,A:255,count:24}]},{Name:"spit",frequentColors:[{R:51,G:102,B:51,A:255,count:54},{R:59,G:85,B:85,A:255,count:24}]},{Name:"spider",frequentColors:[{R:134,G:103,B:103,A:255,count:1244},{R:155,G:0,B:0,A:255,count:393},{R:128,G:128,B:128,A:255,count:120},{R:33,G:33,B:33,A:255,count:120},{R:119,
G:119,B:119,A:255,count:28}]},{Name:"bigspider",frequentColors:[{R:128,G:128,B:128,A:255,count:265},{R:33,G:33,B:33,A:255,count:246}]},{Name:"trite",frequentColors:[{R:227,G:198,B:197,A:255,count:1249},{R:207,G:156,B:155,A:255,count:556},{R:131,G:0,B:0,A:255,count:313},{R:185,G:115,B:113,A:255,count:167},{R:179,G:0,B:0,A:255,count:133}]},{Name:"boil",frequentColors:[{R:131,G:0,B:0,A:255,count:452},{R:179,G:0,B:0,A:255,count:367},{R:83,G:0,B:0,A:255,count:153}]},{Name:"gut",frequentColors:[{R:64,G:79,
B:61,A:255,count:452},{R:99,G:135,B:94,A:255,count:367},{R:48,G:59,B:46,A:255,count:153}]},{Name:"sack",frequentColors:[{R:187,G:187,B:187,A:255,count:409},{R:99,G:99,B:99,A:255,count:179}]},{Name:"boomfly",frequentColors:[{R:60,G:60,B:60,A:255,count:161},{R:88,G:88,B:88,A:255,count:109},{R:46,G:46,B:46,A:255,count:64}]},{Name:"redboomfly",frequentColors:[{R:155,G:0,B:0,A:255,count:215},{R:231,G:0,B:0,A:255,count:109},{R:83,G:0,B:0,A:255,count:52}]},{Name:"maggot",frequentColors:[{R:223,G:207,B:185,
A:255,count:1192},{R:244,G:239,B:232,A:255,count:477},{R:192,G:161,B:117,A:255,count:376},{R:131,G:101,B:59,A:255,count:24}]},{Name:"charger",frequentColors:[{R:223,G:207,B:185,A:255,count:1176},{R:192,G:161,B:117,A:255,count:388},{R:244,G:239,B:232,A:255,count:362},{R:131,G:101,B:59,A:255,count:24}]},{Name:"spitty",frequentColors:[{R:214,G:195,B:167,A:255,count:2260},{R:192,G:161,B:117,A:255,count:1021},{R:230,G:219,B:202,A:255,count:553},{R:157,G:122,B:71,A:255,count:271},{R:96,G:75,B:43,A:255,
count:16}]},{Name:"host",frequentColors:[{R:140,G:123,B:123,A:255,count:324},{R:171,G:160,B:160,A:255,count:243},{R:97,G:85,B:85,A:255,count:139},{R:175,G:165,B:165,A:255,count:100},{R:155,G:0,B:0,A:255,count:85},{R:65,G:57,B:57,A:255,count:72},{R:107,G:0,B:0,A:255,count:50},{R:67,G:0,B:0,A:255,count:43},{R:115,G:108,B:108,A:255,count:40},{R:231,G:0,B:0,A:255,count:20}]},{Name:"redhost",frequentColors:[{R:155,G:0,B:0,A:255,count:356},{R:123,G:0,B:0,A:255,count:216},{R:195,G:0,B:0,A:255,count:193},
{R:83,G:0,B:0,A:255,count:95},{R:224,G:105,B:105,A:255,count:92},{R:192,G:83,B:83,A:255,count:59},{R:107,G:0,B:0,A:255,count:50},{R:67,G:0,B:0,A:255,count:43},{R:231,G:0,B:0,A:255,count:20},{R:164,G:60,B:60,A:255,count:17}]},{Name:"hive",frequentColors:[{R:198,G:175,B:175,A:255,count:1390},{R:165,G:140,B:140,A:255,count:782},{R:128,G:107,B:107,A:255,count:445},{R:91,G:74,B:74,A:255,count:386},{R:166,G:130,B:130,A:255,count:169},{R:136,G:97,B:97,A:255,count:113},{R:30,G:25,B:25,A:255,count:58},{R:74,
G:61,B:61,A:255,count:44},{R:112,G:77,B:77,A:255,count:43},{R:223,G:204,B:221,A:255,count:32},{R:53,G:44,B:44,A:255,count:30}]},{Name:"maw",frequentColors:[{R:155,G:0,B:0,A:255,count:175},{R:235,G:235,B:235,A:255,count:133},{R:151,G:151,B:151,A:255,count:92},{R:107,G:0,B:0,A:255,count:73},{R:153,G:75,B:75,A:255,count:20},{R:195,G:117,B:117,A:255,count:18},{R:81,G:0,B:0,A:255,count:16},{R:193,G:193,B:193,A:255,count:8}]},{Name:"redmaw",frequentColors:[{R:255,G:191,B:191,A:255,count:113},{R:155,G:0,
B:0,A:255,count:93},{R:210,G:120,B:120,A:255,count:64},{R:107,G:0,B:0,A:255,count:34}]},{Name:"psychicmaw",frequentColors:[{R:179,G:46,B:176,A:255,count:673},{R:235,G:235,B:235,A:255,count:126},{R:203,G:203,B:203,A:255,count:118},{R:151,G:151,B:151,A:255,count:38},{R:155,G:0,B:0,A:255,count:25},{R:42,G:42,B:42,A:255,count:19},{R:107,G:0,B:0,A:255,count:15}]},{Name:"knight",frequentColors:[{R:167,G:167,B:167,A:255,count:267},{R:210,G:120,B:120,A:255,count:189},{R:197,G:82,B:82,A:255,count:125},{R:119,
G:119,B:119,A:255,count:106},{R:241,G:213,B:213,A:255,count:71},{R:78,G:78,B:78,A:255,count:31}]},{Name:"selflessknight",frequentColors:[{R:227,G:198,B:197,A:255,count:326},{R:167,G:167,B:167,A:255,count:179},{R:207,G:156,B:155,A:255,count:74},{R:119,G:119,B:119,A:255,count:71},{R:78,G:78,B:78,A:255,count:50},{R:156,G:200,B:204,A:255,count:29},{R:104,G:152,B:156,A:255,count:22},{R:185,G:115,B:113,A:255,count:12}]},{Name:"keeper",frequentColors:[{R:167,G:167,B:167,A:255,count:1192},{R:119,G:119,B:119,
A:255,count:385},{R:83,G:83,B:83,A:255,count:151}]},{Name:"blicker",frequentColors:[{R:227,G:198,B:197,A:255,count:4229},{R:207,G:156,B:155,A:255,count:847},{R:185,G:115,B:113,A:255,count:362},{R:200,G:71,B:71,A:255,count:119},{R:219,G:133,B:133,A:255,count:62}]},{Name:"embryo",frequentColors:[{R:198,G:168,B:168,A:255,count:1517},{R:181,G:142,B:142,A:255,count:1165},{R:135,G:106,B:106,A:255,count:751},{R:219,G:200,B:200,A:255,count:122},{R:113,G:74,B:74,A:255,count:96},{R:202,G:121,B:121,A:255,count:78},
{R:164,G:98,B:98,A:255,count:48}]},{Name:"baby",frequentColors:[{R:197,G:178,B:178,A:255,count:223},{R:165,G:140,B:140,A:255,count:119},{R:128,G:107,B:107,A:255,count:91},{R:107,G:0,B:0,A:255,count:32},{R:155,G:0,B:0,A:255,count:15}]},{Name:"angelicbaby",frequentColors:[{R:197,G:178,B:178,A:255,count:239},{R:165,G:140,B:140,A:255,count:137},{R:128,G:107,B:107,A:255,count:102},{R:214,G:214,B:214,A:255,count:42}]},{Name:"brain",frequentColors:[{R:4,G:1,B:1,A:255,count:123},{R:249,G:214,B:255,A:255,
count:30},{R:252,G:233,B:255,A:255,count:16},{R:211,G:177,B:217,A:255,count:12},{R:249,G:213,B:255,A:255,count:11},{R:212,G:177,B:218,A:255,count:9},{R:210,G:178,B:216,A:255,count:8}]},{Name:"membrain",frequentColors:[{R:171,G:147,B:176,A:255,count:386},{R:239,G:180,B:255,A:255,count:255},{R:108,G:94,B:110,A:255,count:174}]},{Name:"globin",frequentColors:[{R:87,G:23,B:23,A:255,count:2301},{R:121,G:32,B:32,A:255,count:1575},{R:56,G:15,B:15,A:255,count:898},{R:119,G:119,B:119,A:255,count:53},{R:152,
G:130,B:155,A:255,count:9}]},{Name:"guts",frequentColors:[{R:78,G:48,B:40,A:255,count:667},{R:151,G:82,B:82,A:255,count:551},{R:106,G:65,B:55,A:255,count:488},{R:122,G:103,B:77,A:255,count:481},{R:177,G:112,B:112,A:255,count:415},{R:56,G:34,B:27,A:255,count:305},{R:169,G:149,B:120,A:255,count:252},{R:202,G:158,B:158,A:255,count:185},{R:128,G:28,B:28,A:255,count:160},{R:87,G:74,B:55,A:255,count:152},{R:151,G:92,B:78,A:255,count:97},{R:170,G:38,B:38,A:255,count:92},{R:212,G:63,B:63,A:255,count:13}]},
{Name:"mamaguts",frequentColors:[{R:169,G:149,B:120,A:255,count:219},{R:151,G:82,B:82,A:255,count:153},{R:122,G:103,B:77,A:255,count:124},{R:78,G:48,B:40,A:255,count:89},{R:177,G:112,B:112,A:255,count:85},{R:128,G:28,B:28,A:255,count:57},{R:106,G:65,B:55,A:255,count:55},{R:202,G:158,B:158,A:255,count:48},{R:170,G:38,B:38,A:255,count:35},{R:151,G:92,B:78,A:255,count:33}]},{Name:"leech",frequentColors:[{R:219,G:172,B:160,A:255,count:1431},{R:164,G:122,B:111,A:255,count:1018},{R:114,G:76,B:66,A:255,
count:306},{R:59,G:34,B:27,A:255,count:143},{R:219,G:167,B:227,A:255,count:73},{R:141,G:111,B:145,A:255,count:18}]},{Name:"kamikazeleech",frequentColors:[{R:85,G:85,B:85,A:255,count:1357},{R:54,G:54,B:54,A:255,count:844},{R:37,G:37,B:37,A:255,count:362},{R:219,G:167,B:227,A:255,count:262},{R:141,G:111,B:145,A:255,count:72}]},{Name:"holyleech",frequentColors:[{R:219,G:167,B:227,A:255,count:1106},{R:141,G:111,B:145,A:255,count:439}]},{Name:"cagevis",frequentColors:[{R:140,G:138,B:138,A:255,count:1035},
{R:107,G:103,B:103,A:255,count:830},{R:79,G:76,B:76,A:255,count:455},{R:51,G:37,B:45,A:255,count:93},{R:70,G:50,B:62,A:255,count:82},{R:84,G:85,B:62,A:255,count:19},{R:39,G:28,B:35,A:255,count:17}]},{Name:"chubber",frequentColors:[{R:227,G:198,B:197,A:255,count:868},{R:207,G:156,B:155,A:255,count:828},{R:185,G:115,B:113,A:255,count:481},{R:200,G:210,B:175,A:255,count:125},{R:107,G:0,B:0,A:255,count:93},{R:179,G:0,B:0,A:255,count:82},{R:223,G:228,B:208,A:255,count:69},{R:135,G:148,B:97,A:255,count:25},
{R:131,G:0,B:0,A:255,count:17}]},{Name:"hanger",frequentColors:[{R:167,G:167,B:167,A:255,count:672},{R:119,G:119,B:119,A:255,count:274},{R:83,G:83,B:83,A:255,count:144},{R:113,G:82,B:51,A:255,count:84},{R:86,G:56,B:26,A:255,count:84},{R:187,G:187,B:187,A:255,count:60},{R:151,G:151,B:151,A:255,count:52}]},{Name:"maskandheart",frequentColors:[{R:147,G:129,B:118,A:255,count:933},{R:192,G:181,B:175,A:255,count:397},{R:121,G:32,B:32,A:255,count:143},{R:87,G:23,B:23,A:255,count:70},{R:167,G:43,B:43,A:255,
count:47},{R:121,G:37,B:67,A:255,count:36},{R:112,G:100,B:92,A:255,count:30},{R:156,G:200,B:204,A:255,count:27},{R:104,G:152,B:156,A:255,count:15},{R:68,G:18,B:18,A:255,count:13},{R:93,G:28,B:48,A:255,count:12},{R:186,G:71,B:108,A:255,count:12},{R:226,G:153,B:153,A:255,count:11}]},{Name:"slide",frequentColors:[{R:16,G:17,B:21,A:255,count:397},{R:31,G:35,B:42,A:255,count:344},{R:73,G:80,B:101,A:255,count:301},{R:64,G:69,B:88,A:255,count:211},{R:34,G:32,B:32,A:255,count:200},{R:81,G:73,B:73,A:255,count:106},
{R:41,G:44,B:56,A:255,count:71},{R:64,G:58,B:58,A:255,count:64},{R:126,G:113,B:113,A:255,count:41}]},{Name:"poky",frequentColors:[{R:21,G:16,B:16,A:255,count:397},{R:40,G:32,B:32,A:255,count:344},{R:85,G:74,B:74,A:255,count:301},{R:77,G:64,B:64,A:255,count:211},{R:34,G:32,B:32,A:255,count:200},{R:76,G:69,B:69,A:255,count:106},{R:52,G:41,B:41,A:255,count:71},{R:61,G:56,B:56,A:255,count:64},{R:113,G:102,B:102,A:255,count:41}]},{Name:"swarmer",frequentColors:[{R:177,G:156,B:148,A:255,count:835},{R:120,
G:103,B:97,A:255,count:613},{R:128,G:128,B:128,A:255,count:431},{R:60,G:52,B:49,A:255,count:357},{R:191,G:191,B:191,A:255,count:208},{R:64,G:64,B:64,A:255,count:156},{R:40,G:35,B:32,A:255,count:83}]},{Name:"dople",frequentColors:[{R:121,G:32,B:32,A:255,count:1333},{R:87,G:23,B:23,A:255,count:762},{R:155,G:0,B:0,A:255,count:87}]},{Name:"eviltwin",frequentColors:[{R:33,G:33,B:33,A:255,count:1825},{R:18,G:18,B:18,A:255,count:1200},{R:38,G:38,B:38,A:255,count:1097},{R:57,G:57,B:57,A:255,count:792},{R:31,
G:31,B:31,A:255,count:638},{R:42,G:42,B:42,A:255,count:243},{R:87,G:23,B:23,A:255,count:127},{R:152,G:130,B:155,A:255,count:53}]},{Name:"eye",frequentColors:[{R:203,G:203,B:203,A:255,count:527},{R:121,G:14,B:14,A:255,count:466},{R:79,G:9,B:9,A:255,count:454},{R:60,G:7,B:7,A:255,count:291},{R:151,G:151,B:151,A:255,count:281},{R:99,G:99,B:99,A:255,count:171},{R:83,G:83,B:83,A:255,count:82},{R:121,G:14,B:14,A:253,count:77},{R:121,G:14,B:14,A:254,count:70},{R:68,G:21,B:27,A:255,count:62},{R:67,G:67,B:67,
A:255,count:53},{R:185,G:185,B:185,A:255,count:44},{R:121,G:14,B:14,A:251,count:44},{R:121,G:14,B:14,A:25,count:38},{R:121,G:14,B:14,A:252,count:38},{R:121,G:14,B:14,A:250,count:37},{R:121,G:14,B:14,A:247,count:32},{R:121,G:14,B:14,A:249,count:31},{R:121,G:14,B:14,A:241,count:26},{R:121,G:14,B:14,A:245,count:23},{R:121,G:14,B:14,A:248,count:23},{R:121,G:14,B:14,A:18,count:21},{R:121,G:14,B:14,A:246,count:20},{R:121,G:14,B:14,A:26,count:19},{R:121,G:14,B:14,A:17,count:19},{R:121,G:14,B:14,A:35,count:18},
{R:121,G:14,B:14,A:242,count:18},{R:121,G:14,B:14,A:237,count:17},{R:121,G:14,B:14,A:21,count:17},{R:121,G:14,B:14,A:27,count:16},{R:121,G:14,B:14,A:32,count:16},{R:121,G:14,B:14,A:232,count:16},{R:121,G:14,B:14,A:116,count:15},{R:121,G:14,B:14,A:234,count:15},{R:121,G:14,B:14,A:5,count:15},{R:121,G:14,B:14,A:34,count:15},{R:121,G:14,B:14,A:215,count:15},{R:121,G:14,B:14,A:225,count:15},{R:121,G:14,B:14,A:30,count:15},{R:121,G:14,B:14,A:243,count:15},{R:121,G:14,B:14,A:198,count:14},{R:121,G:14,B:14,
A:134,count:14},{R:121,G:14,B:14,A:233,count:14},{R:121,G:14,B:14,A:40,count:14},{R:121,G:14,B:14,A:19,count:14},{R:179,G:0,B:0,A:255,count:14},{R:121,G:14,B:14,A:28,count:14},{R:121,G:14,B:14,A:151,count:13},{R:121,G:14,B:14,A:37,count:13},{R:121,G:14,B:14,A:221,count:13},{R:121,G:14,B:14,A:33,count:13},{R:121,G:14,B:14,A:240,count:13},{R:121,G:14,B:14,A:220,count:13},{R:121,G:14,B:14,A:170,count:13},{R:121,G:14,B:14,A:212,count:13},{R:121,G:14,B:14,A:209,count:13},{R:121,G:14,B:14,A:20,count:13},
{R:121,G:14,B:14,A:94,count:12},{R:121,G:14,B:14,A:155,count:12},{R:121,G:14,B:14,A:8,count:12},{R:121,G:14,B:14,A:188,count:12},{R:121,G:14,B:14,A:112,count:12},{R:121,G:14,B:14,A:244,count:12},{R:121,G:14,B:14,A:3,count:12},{R:121,G:14,B:14,A:70,count:12},{R:121,G:14,B:14,A:223,count:12},{R:121,G:14,B:14,A:228,count:12},{R:121,G:14,B:14,A:199,count:12},{R:121,G:14,B:14,A:143,count:12},{R:121,G:14,B:14,A:204,count:11},{R:121,G:14,B:14,A:22,count:11},{R:121,G:14,B:14,A:77,count:11},{R:121,G:14,B:14,
A:118,count:11},{R:121,G:14,B:14,A:180,count:11},{R:121,G:14,B:14,A:227,count:11},{R:121,G:14,B:14,A:38,count:11},{R:121,G:14,B:14,A:11,count:11},{R:121,G:14,B:14,A:153,count:11},{R:121,G:14,B:14,A:13,count:11},{R:121,G:14,B:14,A:29,count:11},{R:121,G:14,B:14,A:54,count:11},{R:121,G:14,B:14,A:76,count:11},{R:121,G:14,B:14,A:121,count:11},{R:121,G:14,B:14,A:46,count:11},{R:121,G:14,B:14,A:55,count:11},{R:121,G:14,B:14,A:226,count:11},{R:121,G:14,B:14,A:115,count:11},{R:121,G:14,B:14,A:105,count:11},
{R:121,G:14,B:14,A:179,count:11},{R:121,G:14,B:14,A:24,count:11},{R:121,G:14,B:14,A:47,count:11},{R:121,G:14,B:14,A:144,count:11},{R:121,G:14,B:14,A:98,count:10},{R:121,G:14,B:14,A:83,count:10},{R:121,G:14,B:14,A:185,count:10},{R:121,G:14,B:14,A:167,count:10},{R:121,G:14,B:14,A:239,count:10},{R:121,G:14,B:14,A:217,count:10},{R:121,G:14,B:14,A:210,count:10},{R:121,G:14,B:14,A:211,count:10},{R:121,G:14,B:14,A:42,count:10},{R:121,G:14,B:14,A:4,count:10},{R:121,G:14,B:14,A:14,count:10},{R:121,G:14,B:14,
A:31,count:10},{R:121,G:14,B:14,A:107,count:10},{R:121,G:14,B:14,A:48,count:10},{R:121,G:14,B:14,A:63,count:10},{R:121,G:14,B:14,A:60,count:10},{R:121,G:14,B:14,A:53,count:10},{R:121,G:14,B:14,A:52,count:10},{R:121,G:14,B:14,A:69,count:10},{R:121,G:14,B:14,A:68,count:9},{R:121,G:14,B:14,A:152,count:9},{R:121,G:14,B:14,A:7,count:9},{R:121,G:14,B:14,A:189,count:9},{R:121,G:14,B:14,A:67,count:9},{R:121,G:14,B:14,A:73,count:9},{R:121,G:14,B:14,A:206,count:9},{R:121,G:14,B:14,A:97,count:9},{R:121,G:14,
B:14,A:80,count:9},{R:121,G:14,B:14,A:131,count:9},{R:121,G:14,B:14,A:136,count:9},{R:121,G:14,B:14,A:58,count:9},{R:121,G:14,B:14,A:171,count:9},{R:121,G:14,B:14,A:146,count:9},{R:121,G:14,B:14,A:231,count:9},{R:121,G:14,B:14,A:122,count:9},{R:121,G:14,B:14,A:23,count:9},{R:121,G:14,B:14,A:128,count:9},{R:121,G:14,B:14,A:158,count:9},{R:121,G:14,B:14,A:106,count:9},{R:121,G:14,B:14,A:12,count:9},{R:121,G:14,B:14,A:126,count:9},{R:121,G:14,B:14,A:164,count:9},{R:121,G:14,B:14,A:119,count:9},{R:121,
G:14,B:14,A:213,count:9},{R:121,G:14,B:14,A:101,count:9},{R:121,G:14,B:14,A:195,count:8},{R:121,G:14,B:14,A:56,count:8},{R:121,G:14,B:14,A:214,count:8},{R:121,G:14,B:14,A:49,count:8},{R:121,G:14,B:14,A:89,count:8},{R:121,G:14,B:14,A:149,count:8},{R:121,G:14,B:14,A:135,count:8},{R:121,G:14,B:14,A:200,count:8},{R:121,G:14,B:14,A:108,count:8},{R:121,G:14,B:14,A:117,count:8},{R:121,G:14,B:14,A:178,count:8},{R:121,G:14,B:14,A:224,count:8},{R:121,G:14,B:14,A:120,count:8},{R:121,G:14,B:14,A:1,count:8},{R:121,
G:14,B:14,A:187,count:8},{R:121,G:14,B:14,A:186,count:8},{R:121,G:14,B:14,A:129,count:8},{R:121,G:14,B:14,A:100,count:8},{R:121,G:14,B:14,A:84,count:8},{R:121,G:14,B:14,A:43,count:8},{R:121,G:14,B:14,A:10,count:8},{R:121,G:14,B:14,A:36,count:8},{R:121,G:14,B:14,A:61,count:8},{R:121,G:14,B:14,A:62,count:8},{R:121,G:14,B:14,A:139,count:8},{R:121,G:14,B:14,A:133,count:8},{R:121,G:14,B:14,A:6,count:8},{R:121,G:14,B:14,A:208,count:8},{R:121,G:14,B:14,A:177,count:8},{R:121,G:14,B:14,A:66,count:8},{R:121,
G:14,B:14,A:114,count:8},{R:121,G:14,B:14,A:102,count:8},{R:121,G:14,B:14,A:41,count:8},{R:121,G:14,B:14,A:238,count:8},{R:121,G:14,B:14,A:162,count:8},{R:121,G:14,B:14,A:193,count:8}]},{Name:"fred",frequentColors:[{R:168,G:77,B:77,A:255,count:3522},{R:121,G:14,B:14,A:255,count:1772},{R:98,G:50,B:50,A:255,count:1746},{R:178,G:128,B:128,A:255,count:866},{R:175,G:36,B:36,A:255,count:436},{R:79,G:9,B:9,A:255,count:297},{R:235,G:235,B:235,A:255,count:128},{R:203,G:203,B:203,A:255,count:72},{R:151,G:151,
B:151,A:255,count:56}]},{Name:"monster_197_fred_dirt",frequentColors:[{R:168,G:77,B:77,A:255,count:3522},{R:96,G:57,B:19,A:255,count:1772},{R:98,G:50,B:50,A:255,count:1746},{R:178,G:128,B:128,A:255,count:866},{R:140,G:98,B:57,A:255,count:532},{R:52,G:29,B:17,A:255,count:297},{R:235,G:235,B:235,A:255,count:128},{R:203,G:203,B:203,A:255,count:72},{R:151,G:151,B:151,A:255,count:56}]},{Name:"monster_197_fred_flooded",frequentColors:[{R:168,G:77,B:77,A:255,count:3522},{R:23,G:37,B:46,A:255,count:1772},
{R:98,G:50,B:50,A:255,count:1746},{R:178,G:128,B:128,A:255,count:866},{R:45,G:55,B:64,A:255,count:532},{R:7,G:22,B:31,A:255,count:297},{R:235,G:235,B:235,A:255,count:128},{R:203,G:203,B:203,A:255,count:72},{R:151,G:151,B:151,A:255,count:56}]},{Name:"monster_197_fred_scarred",frequentColors:[{R:168,G:77,B:77,A:255,count:3522},{R:146,G:104,B:90,A:255,count:1772},{R:98,G:50,B:50,A:255,count:1746},{R:178,G:128,B:128,A:255,count:866},{R:168,G:124,B:106,A:255,count:436},{R:64,G:42,B:32,A:255,count:297},
{R:235,G:235,B:235,A:255,count:128},{R:181,G:164,B:125,A:255,count:96},{R:203,G:203,B:203,A:255,count:72},{R:151,G:151,B:151,A:255,count:56}]},{Name:"lump",frequentColors:[{R:79,G:9,B:9,A:255,count:1206},{R:121,G:14,B:14,A:255,count:1037},{R:60,G:7,B:7,A:255,count:270},{R:121,G:14,B:14,A:39,count:106},{R:121,G:14,B:14,A:96,count:83},{R:121,G:14,B:14,A:159,count:80},{R:121,G:14,B:14,A:216,count:62},{R:121,G:14,B:14,A:31,count:52},{R:121,G:14,B:14,A:80,count:29},{R:121,G:14,B:14,A:62,count:29},{R:121,
G:14,B:14,A:113,count:29},{R:121,G:14,B:14,A:76,count:27},{R:121,G:14,B:14,A:128,count:27},{R:121,G:14,B:14,A:123,count:27},{R:121,G:14,B:14,A:192,count:27},{R:121,G:14,B:14,A:25,count:27},{R:121,G:14,B:14,A:105,count:27},{R:121,G:14,B:14,A:240,count:25},{R:121,G:14,B:14,A:166,count:25},{R:121,G:14,B:14,A:150,count:25},{R:121,G:14,B:14,A:179,count:24},{R:121,G:14,B:14,A:16,count:24},{R:121,G:14,B:14,A:193,count:16},{R:121,G:14,B:14,A:200,count:16},{R:121,G:14,B:14,A:224,count:12}]},{Name:"monster_198_lump_dirt",
frequentColors:[{R:121,G:14,B:14,A:255,count:878},{R:96,G:57,B:19,A:255,count:744},{R:79,G:9,B:9,A:255,count:462},{R:140,G:98,B:57,A:255,count:159},{R:60,G:7,B:7,A:255,count:153},{R:52,G:29,B:17,A:255,count:117},{R:140,G:98,B:57,A:39,count:106},{R:140,G:98,B:57,A:96,count:83},{R:140,G:98,B:57,A:159,count:80},{R:140,G:98,B:57,A:216,count:62},{R:140,G:98,B:57,A:31,count:52},{R:140,G:98,B:57,A:62,count:29},{R:140,G:98,B:57,A:80,count:29},{R:140,G:98,B:57,A:113,count:29},{R:140,G:98,B:57,A:25,count:27},
{R:140,G:98,B:57,A:123,count:27},{R:140,G:98,B:57,A:105,count:27},{R:140,G:98,B:57,A:192,count:27},{R:140,G:98,B:57,A:76,count:27},{R:140,G:98,B:57,A:128,count:27},{R:140,G:98,B:57,A:150,count:25},{R:140,G:98,B:57,A:240,count:25},{R:140,G:98,B:57,A:166,count:25},{R:140,G:98,B:57,A:179,count:24},{R:140,G:98,B:57,A:16,count:24},{R:140,G:98,B:57,A:200,count:16},{R:140,G:98,B:57,A:193,count:16},{R:140,G:98,B:57,A:224,count:12}]},{Name:"monster_198_lump_flooded",frequentColors:[{R:121,G:14,B:14,A:255,
count:878},{R:23,G:37,B:46,A:255,count:744},{R:79,G:9,B:9,A:255,count:462},{R:45,G:55,B:64,A:255,count:159},{R:60,G:7,B:7,A:255,count:153},{R:7,G:22,B:31,A:255,count:117},{R:45,G:55,B:64,A:39,count:106},{R:45,G:55,B:64,A:96,count:83},{R:45,G:55,B:64,A:159,count:80},{R:45,G:55,B:64,A:216,count:62},{R:45,G:55,B:64,A:31,count:52},{R:45,G:55,B:64,A:62,count:29},{R:45,G:55,B:64,A:80,count:29},{R:45,G:55,B:64,A:113,count:29},{R:45,G:55,B:64,A:25,count:27},{R:45,G:55,B:64,A:123,count:27},{R:45,G:55,B:64,
A:105,count:27},{R:45,G:55,B:64,A:192,count:27},{R:45,G:55,B:64,A:76,count:27},{R:45,G:55,B:64,A:128,count:27},{R:45,G:55,B:64,A:150,count:25},{R:45,G:55,B:64,A:240,count:25},{R:45,G:55,B:64,A:166,count:25},{R:45,G:55,B:64,A:179,count:24},{R:45,G:55,B:64,A:16,count:24},{R:45,G:55,B:64,A:200,count:16},{R:45,G:55,B:64,A:193,count:16},{R:45,G:55,B:64,A:224,count:12}]},{Name:"monster_198_lump_scarred",frequentColors:[{R:121,G:14,B:14,A:255,count:878},{R:117,G:85,B:73,A:255,count:744},{R:79,G:9,B:9,A:255,
count:462},{R:168,G:124,B:106,A:255,count:159},{R:60,G:7,B:7,A:255,count:153},{R:81,G:56,B:45,A:255,count:117},{R:168,G:124,B:106,A:39,count:106},{R:168,G:124,B:106,A:96,count:83},{R:168,G:124,B:106,A:159,count:80},{R:168,G:124,B:106,A:216,count:62},{R:168,G:124,B:106,A:31,count:52},{R:168,G:124,B:106,A:62,count:29},{R:168,G:124,B:106,A:80,count:29},{R:168,G:124,B:106,A:113,count:29},{R:168,G:124,B:106,A:25,count:27},{R:168,G:124,B:106,A:123,count:27},{R:168,G:124,B:106,A:105,count:27},{R:168,G:124,
B:106,A:192,count:27},{R:168,G:124,B:106,A:76,count:27},{R:168,G:124,B:106,A:128,count:27},{R:168,G:124,B:106,A:150,count:25},{R:168,G:124,B:106,A:240,count:25},{R:168,G:124,B:106,A:166,count:25},{R:168,G:124,B:106,A:179,count:24},{R:168,G:124,B:106,A:16,count:24},{R:168,G:124,B:106,A:200,count:16},{R:168,G:124,B:106,A:193,count:16},{R:168,G:124,B:106,A:224,count:12}]},{Name:"parabite",frequentColors:[{R:201,G:190,B:203,A:255,count:613},{R:121,G:14,B:14,A:255,count:334},{R:79,G:9,B:9,A:255,count:212},
{R:162,G:140,B:144,A:255,count:186},{R:175,G:36,B:36,A:255,count:153},{R:115,G:98,B:101,A:255,count:118},{R:60,G:7,B:7,A:255,count:65},{R:228,G:222,B:229,A:255,count:37},{R:83,G:72,B:74,A:255,count:19},{R:56,G:48,B:49,A:255,count:15}]},{Name:"monster_199_parabite_dirt",frequentColors:[{R:201,G:190,B:203,A:255,count:613},{R:96,G:57,B:19,A:255,count:334},{R:60,G:38,B:30,A:255,count:212},{R:162,G:140,B:144,A:255,count:186},{R:140,G:98,B:57,A:255,count:153},{R:115,G:98,B:101,A:255,count:118},{R:52,G:29,
B:17,A:255,count:65},{R:228,G:222,B:229,A:255,count:37},{R:83,G:72,B:74,A:255,count:19},{R:56,G:48,B:49,A:255,count:15}]},{Name:"monster_199_parabite_flooded",frequentColors:[{R:201,G:190,B:203,A:255,count:613},{R:23,G:37,B:46,A:255,count:334},{R:7,G:31,B:45,A:255,count:212},{R:162,G:140,B:144,A:255,count:186},{R:45,G:55,B:64,A:255,count:153},{R:115,G:98,B:101,A:255,count:118},{R:7,G:22,B:31,A:255,count:65},{R:228,G:222,B:229,A:255,count:37},{R:83,G:72,B:74,A:255,count:19},{R:56,G:48,B:49,A:255,count:15}]},
{Name:"monster_199_parabite_scarred",frequentColors:[{R:201,G:190,B:203,A:255,count:613},{R:146,G:104,B:90,A:255,count:334},{R:98,G:71,B:59,A:255,count:212},{R:162,G:140,B:144,A:255,count:186},{R:181,G:164,B:125,A:255,count:153},{R:115,G:98,B:101,A:255,count:118},{R:81,G:56,B:45,A:255,count:65},{R:228,G:222,B:229,A:255,count:37},{R:83,G:72,B:74,A:255,count:19},{R:56,G:48,B:49,A:255,count:15}]},{Name:"brimstoneeye",frequentColors:[{R:246,G:196,B:196,A:255,count:2420},{R:245,G:146,B:146,A:255,count:1171},
{R:174,G:93,B:93,A:255,count:473},{R:235,G:222,B:222,A:255,count:461},{R:132,G:62,B:62,A:255,count:378},{R:29,G:24,B:24,A:255,count:101},{R:86,G:27,B:27,A:255,count:83},{R:58,G:17,B:17,A:255,count:15}]}];




var canvas = document.getElementById("canvas");
var canvasOriginal = document.getElementById("original");
var imageOriginal = new MarvinImage();
var imageProcessed = new MarvinImage();
var imageDisplay = new MarvinImage();
var scale=1;

document.getElementById('picField').onchange = function (evt) {
    var tgt = evt.target || window.event.srcElement,
        files = tgt.files;

    // FileReader support
    if (FileReader && files && files.length) {
        var fr = new FileReader();
        fr.onload = function () {
			imageOriginal.load(fr.result, imageLoaded);
			document.getElementById("actionBar").style.display = "block";
			document.getElementById("editField").style.display = "block";
        }
        fr.readAsDataURL(files[0]);
    }

    // Not supported
    else {
        // fallback -- perhaps submit the input to an iframe and temporarily store
        // them on the server until the user's session ends.
    }
}
$(document).ready(function() {
    $("body").tooltip({ selector: '[data-toggle=tooltip]',
      delay: {show: 500, hide: 100},placement:"right"  }); 
    $('button').on('mousedown', function(){
      $('[data-toggle="tooltip"]').tooltip('hide');
    });
    $('[data-toggle="tooltip"]').on('mouseleave', function(){
      $('[data-toggle="tooltip"]').tooltip('hide');
    });
	var i = 0;
	$.each( data, function( key, value ) {
	$("#colors").append(new Option(data[i].Name, i));
	i++;
	});
});

function onColorChange(){
	var tempColor = imageProcessed.getIntColor(0,0);
  var myNode = document.getElementById("histogramEntity").innerHTML = '';
  entityID=document.getElementById("colors").value;
  for (i=0; i < data[entityID].frequentColors.length; i++) { 
	color = data[entityID].frequentColors[i];
	imageProcessed.setIntColor(0,0, color.A, color.R,color.G,color.B);
	var div = document.createElement("div");
	div.setAttribute('class', 'histEntry');
	div.setAttribute('draggable', 'true');
	div.setAttribute('id', imageProcessed.getIntColor(0,0));
	div.classList.add("tooltip2");
	div.innerHTML = "<span>"+color.count+"</span>  <span class=\"tooltiptext\">Red: "+color.R+" Green: "+color.G+" Blue: "+color.B+" Alpha: "+color.A+"</span>";
	div.style.background = "rgba("+color.R+","+color.G+","+color.B+","+color.A+")";
	document.getElementById("histogramEntity").appendChild(div);
	}
	 cols= document.querySelectorAll('.histEntry');
	[].forEach.call(cols, function(col) {
	  col.addEventListener('dragstart', handleDragStart, false);
	  col.addEventListener('dragenter', handleDragEnter, false)
	  col.addEventListener('dragover', handleDragOver, false);
	  col.addEventListener('dragleave', handleDragLeave, false);
	  col.addEventListener('drop', handleDrop, false);
	  col.addEventListener('dragend', handleDragEnd, false);
	});
	imageProcessed.setIntColor(0,0, tempColor);
}

function changeZoom(){
	scale=document.getElementById("zoomlevel").value/100;
	canvasOriginal.width = imageOriginal.getWidth()*scale;
    canvasOriginal.height = imageOriginal.getHeight()*scale;
	canvasOriginal.getContext("2d").fillStyle = "#eeeeee";
	canvasOriginal.getContext("2d").fillRect(0,0,canvasOriginal.width, canvasOriginal.height);
	var temp = new MarvinImage();
	Marvin.scale(imageOriginal, temp, canvasOriginal.width, canvasOriginal.height);
	temp.draw(canvasOriginal);
	canvas.width = imageOriginal.getWidth()*scale;
    canvas.height = imageOriginal.getHeight()*scale;
	canvas.getContext("2d").fillStyle = "#eeeeee";
	canvas.getContext("2d").fillRect(0,0,canvasOriginal.width, canvasOriginal.height);
	temp = new MarvinImage();
	Marvin.scale(imageProcessed, temp, canvasOriginal.width, canvasOriginal.height);
	temp.draw(canvas);
	
}
function clickDownload(){
	temp = new MarvinImage();
	Marvin.scale(imageProcessed, temp, imageOriginal.getWidth(), imageOriginal.getHeight());
	canvas.width = imageOriginal.getWidth();
    canvas.height = imageOriginal.getHeight();
	temp.draw(canvas);
	var link = document.createElement('a');
    link.download = 'Download.png';
    link.href = canvas.toDataURL("image/png")
    link.click();
	changeZoom();
}
function clickReset(){
	imageProcessed = imageOriginal.clone();
	buildHisto();
	repaint();
	
}
function imageLoaded(){
	imageProcessed = imageOriginal.clone();
	canvasOriginal.width = imageOriginal.getWidth();
    canvasOriginal.height = imageOriginal.getHeight();
	canvasOriginal.getContext("2d").fillStyle = "#eeeeee";
	canvasOriginal.getContext("2d").fillRect(0,0,canvasOriginal.width, canvasOriginal.height);
  imageOriginal.draw(canvasOriginal);
	canvas.width = imageOriginal.getWidth();
    canvas.height = imageOriginal.getHeight();
	canvas.getContext("2d").fillStyle = "#eeeeee";
	canvas.getContext("2d").fillRect(0,0,canvasOriginal.width, canvasOriginal.height);
	
	
	buildHisto();
	repaint();
}

function repaint(){
	canvas.getContext("2d").fillStyle = "#eeeeee";
	canvas.getContext("2d").fillRect(0,0,canvasOriginal.width, canvasOriginal.height);
	var temp = new MarvinImage();
	Marvin.scale(imageProcessed, temp, canvasOriginal.width, canvasOriginal.height);
	temp.draw(canvas);
	imageProcessed.update();
}
	

function clickRemoveBorder(){
  for(var y=0; y<imageOriginal.getHeight(); y++){
    for(var x=0; x<imageOriginal.getWidth(); x++){
      var red = imageOriginal.getIntComponent0(x,y);
      var green = imageOriginal.getIntComponent1(x,y);
      var blue = imageOriginal.getIntComponent2(x,y);
      var alpha = imageOriginal.getAlphaComponent(x,y);
      
      if(red <= 14 && green <= 0 && blue <=0 && alpha > 0){
        imageProcessed.setIntColor(x, y, 0, 0,0,0);
      }
    }
  }
  repaint();
	buildHisto();
  return imageProcessed.clone();
}
function evalEnvironment(img,x,y){
	return img.getAlphaComponent(x-1,y-1)+img.getAlphaComponent(x-1,y)+img.getAlphaComponent(x-1,y+1)+img.getAlphaComponent(x,y-1)+img.getAlphaComponent(x,y+1)+img.getAlphaComponent(x+1,y-1)+img.getAlphaComponent(x+1,y)+img.getAlphaComponent(x+1,y+1)+img.getAlphaComponent(x-2,y)+img.getAlphaComponent(x+2,y)+img.getAlphaComponent(x,y-2)+img.getAlphaComponent(x,y+2);
}

function clickDrawBorder(){
	var imageTemp = clickRemoveBorder();
  for(var y=0; y<imageTemp.getHeight(); y++){
    for(var x=0; x<imageTemp.getWidth(); x++){
      var red = imageTemp.getIntComponent0(x,y);
      var green = imageTemp.getIntComponent1(x,y);
      var blue = imageTemp.getIntComponent2(x,y);
      var alpha = imageTemp.getAlphaComponent(x,y);

	  if(evalEnvironment(imageTemp,x,y)>0 && alpha==0){
        imageProcessed.setIntColor(x, y, 255, 14,0,0);
	  }
    }
  }
  repaint();
	buildHisto();
}

function replaceColor(oldColor,newColor){
  for(var y=0; y<imageOriginal.getHeight(); y++){
    for(var x=0; x<imageOriginal.getWidth(); x++){
      if(imageProcessed.getIntColor(x,y)==oldColor){
        imageProcessed.setIntColor2(x, y, (newColor & 0xFF000000) >>> 24,newColor);
      }
    }
  }
  repaint();
}

var hist=[];

function buildHisto(){
  for(var y=0; y<imageProcessed.getHeight(); y++){
    for(var x=0; x<imageProcessed.getWidth(); x++){
		var all = imageProcessed.getIntColor(x,y);
      var red = imageProcessed.getIntComponent0(x,y);
      var green = imageProcessed.getIntComponent1(x,y);
      var blue = imageProcessed.getIntComponent2(x,y);
      var alpha = imageProcessed.getAlphaComponent(x,y);
	  if (alpha==0){continue;}
	  var temp= false;
		for(i=0;i<hist.length;i++){
			if (hist[i][0]==all){
				hist[i][5]++;
				temp=true;
			}
		}
	  if(!temp){
		  hist.push([all,red,green,blue,alpha,1]); 
	  }
    }
  }
  hist.sort(function(a, b){return b[5]-a[5];});
  
  var myNode = document.getElementById("histogram").innerHTML = '';
  
  for (i=0; i < hist.length; i++) { 
	var div = document.createElement("div");
	div.setAttribute('class', 'histEntry');
	div.setAttribute('draggable', 'true');
	div.setAttribute('id', hist[i][0]);
	div.classList.add("tooltip2");
	div.innerHTML = "<span>"+hist[i][5]+"</span>  <span class=\"tooltiptext\">Red: "+hist[i][1]+" Green: "+hist[i][2]+" Blue: "+hist[i][3]+" Alpha: "+hist[i][4]+"</span>";
	div.style.background = "rgba("+hist[i][1]+","+hist[i][2]+","+hist[i][3]+","+hist[i][4]+")";
	document.getElementById("histogram").appendChild(div);
	}
	 cols= document.querySelectorAll('.histEntry');
	[].forEach.call(cols, function(col) {
	  col.addEventListener('dragstart', handleDragStart, false);
	  col.addEventListener('dragenter', handleDragEnter, false)
	  col.addEventListener('dragover', handleDragOver, false);
	  col.addEventListener('dragleave', handleDragLeave, false);
	  col.addEventListener('drop', handleDrop, false);
	  col.addEventListener('dragend', handleDragEnd, false);
	});
  repaint();
}

function clickDetectCorners(){
	var ctx = canvas.getContext("2d");
	ctx.fillStyle = "#ff0000";
	var x1=0;
	var y1=0;
	var count=0;
	var x2=0;
	var y2=0;
	var count2=0;
	var width= 32;
	  for(var y=-width/2; y<=width/2; y++){
		for(var x=-width/2; x<=width/2; x++){
		  var alpha = imageProcessed.getAlphaComponent(x+width/2,y+width/2);
      var red = imageProcessed.getIntComponent0(x+width/2,y+width/2);
      var green = imageProcessed.getIntComponent1(x+width/2,y+width/2);
      var blue = imageProcessed.getIntComponent2(x+width/2,y+width/2);
		  if(alpha>0){
			  x1+=x;
			  y1+=y;
			  count++;
		  }
		  if(red==201 && green==190 && blue==203){
			  x2+=x;
			  y2+=y;
			  count2++;
		  }
		}
	  }
	ctx.fillRect(Math.floor(x1/count+width/2),Math.floor(y1/count+width/2),2,2);
	ctx.fillStyle = "#ffff00";
	ctx.fillRect(Math.floor(x2/count2+width/2),Math.floor(y2/count2+width/2),2,2);
	console.log(count+"x1:"+(x1/count+width/2)+",y1:"+(y1/count+width/2));
	console.log(count2+"x1:"+(x2/count2+width/2)+",y1:"+(y2/count2+width/2));
}





var cols;
var dragSrcEl = null;

function handleDragStart(e) {
  this.style.opacity = '0.4';
  dragSrcEl = this;
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/id', this.id);
  e.dataTransfer.setData('text/html', this.firstChild.innerText);
}

function handleDragOver(e) {
  if (e.preventDefault) {
    e.preventDefault();
  }

  e.dataTransfer.dropEffect = 'move'; 
  return false;
}

function handleDragEnter(e) {
  this.classList.add('over');
}

function handleDragLeave(e) {
  this.classList.remove('over');
  dragSrcEl.style.opacity = '1';
}

function handleDrop(e) {
  if (e.stopPropagation) {
    e.stopPropagation(); // Stops some browsers from redirecting.
  }

  // Don't do anything if dropping the same column we're dragging.
  if (dragSrcEl != this) {
    // Set the source column's HTML to the HTML of the column we dropped on.
	replaceColor(e.dataTransfer.getData('text/id'),this.id);
	this.firstChild.innerText = Number(this.firstChild.innerText )+Number(e.dataTransfer.getData('text/html'));
	dragSrcEl.remove();
  }

  return false;
}
function handleDragEnd(e) {
  [].forEach.call(cols, function (col) {
    col.classList.remove('over');
  });
}
